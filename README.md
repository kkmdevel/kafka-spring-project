# Springê³¼ Kafkaë¥¼ ì´ìš©í•œ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ë°ì´í„° ì²˜ë¦¬ ì‹œìŠ¤í…œ
![í”„ë¡œì íŠ¸ íŒë„¬](docs/images/kafkaí”„ë¡œì íŠ¸íŒë„¬.png)

## ðŸ“š ëª©ì°¨
- [ðŸ“– ì†Œê°œ](#ì†Œê°œ)
- [ðŸ› ï¸ ê°œë°œ í™˜ê²½](#ê°œë°œ-í™˜ê²½)
- [ðŸŽ¯ ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ðŸ“ API í˜¸ì¶œ ì‚¬ìš©ë²•](#api-í˜¸ì¶œ-ì‚¬ìš©ë²•)
- [ðŸ”§ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)

## ðŸ“– ì†Œê°œ

**í”„ë¡œì íŠ¸ ê¸°ê°„**: 2024ë…„ 4ì›” 21ì¼ ~ 2024ë…„ 6ì›” 24ì¼

ì´ í”„ë¡œì íŠ¸ëŠ” **ì›¹ ë¡œê·¸ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬**í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í–ˆìŠµë‹ˆë‹¤.  
Kafkaì™€ Spring Bootë¥¼ í™œìš©í•˜ì—¬ ì›¹ì—ì„œ ìƒì„±ë˜ëŠ” ë¡œê·¸ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆ˜ì§‘í•˜ê³ , ì‚¬ìš©ìžê°€ ì›í•˜ëŠ” ê¸°ì¤€ì— ë§žì¶° ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ target ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥í•©ë‹ˆë‹¤.

ì£¼ìš” ê¸°ëŠ¥ìœ¼ë¡œëŠ”,  
- **ì´íƒˆ ê°ì§€**: ì´ìƒ ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë¹ ë¥´ê²Œ ëŒ€ì‘í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  
- **ë¶„ê¸° ì²˜ë¦¬**: íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ë¡œê·¸ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ ê²½ë¡œë¡œ ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
- **ìž¬êµ¬ì„±**: ì›í•˜ëŠ” ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•˜ì—¬ ë¡œê·¸ ë°ì´í„°ë¥¼ ìž¬êµ¬ì„± í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì´ ì‹œìŠ¤í…œì€ ë¹ ë¥´ê²Œ ë³€í•˜ëŠ” ì›¹ í™˜ê²½ì—ì„œ íš¨ìœ¨ì ì¸ ë¡œê·¸ ê´€ë¦¬ì™€ ë¶„ì„ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©°, **ë§ˆì¼€íŒ… ì „ëžµ ìˆ˜ë¦½ì— í° ë„ì›€**ì„ ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

## ðŸ› ï¸ ê°œë°œ í™˜ê²½

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ìˆ  ìŠ¤íƒê³¼ ë„êµ¬ë“¤ì´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤:

### ê¸°ìˆ  ìŠ¤íƒ

- **Back-end**: Spring Booì„ ê°ì§€í•˜ê³ , ì´íƒˆ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
   - ì´ë¥¼ í†µí•´ ì‚¬ìš©ìž ì´íƒˆì„ ì‹¤ì‹œê°„ìœ¼ë¡œ íŒŒì•…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

5. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**
   - JDBC Sink Connectorë¥¼ í†µí•´ Kafkaì—ì„œ ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ MySQL ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥í•©ë‹ˆë‹¤.

6. **ì¼ì‹œì •ì§€ ë° ìž¬ê°€ë™**
   - API í˜¸ì¶œì„ í†µí•´ ê° Connectorë³„ë¡œ ì¼ì‹œì •ì§€ ë° ìž¬ê°€ë™ì„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ ìš´ìš©ì„ ìš©ì´í•˜ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## ðŸ“ API í˜¸ì¶œ ì‚¬ìš©ë²•

ì´ ì„¹ì…˜ì—ì„œëŠ” Kafkaì™€ ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ì—°ê²°ì„ ì„¤ì •í•˜ê³ , ìŠ¤íŠ¸ë¦¼ì„ ê´€ë¦¬ ë° ì²˜ë¦¬í•˜ëŠ” ì£¼ìš” APIë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

### 1. JDBC Sink Connector ìƒì„±

- **API**: `POST /kafka/sinkConnector/{connectorName}/{topicName}/{DBName}/{tableName}/{keyColumn}`
- **ì„¤ëª…**: Kafka ë°ì´í„°ë¥¼ MySQL ë“±ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥í•˜ê¸° ìœ„í•œ JDBC Sink Connectorë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `connectorName`: ì»¤ë„¥í„°ì˜ ì´ë¦„
  - `topicName`: Kafka í† í”½ ì´ë¦„
  - `DBName`: ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
  - `tableName`: ì €ìž¥í•  í…Œì´ë¸” ì´ë¦„
  - `keyColumn`: í‚¤ë¡œ ì‚¬ìš©í•  ì»¬ëŸ¼

### 2. Debezium Source Connector ìƒì„±

- **API**: `POST /kafka/sourceConnector/{connectorName}/{serverID}/{serverName}/{DBName}/{tableName}/{rawStreamName}`
- **ì„¤ëª…**: Debeziumì„ ì‚¬ìš©í•´ MySQLê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë³€ê²½ ì‚¬í•­ì„ Kafkaë¡œ ìŠ¤íŠ¸ë¦¬ë°í•˜ê¸° ìœ„í•œ Source Connectorë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `connectorName`: ì»¤ë„¥í„° ì´ë¦„
  - `serverID`: ì„œë²„ ID
  - `serverName`: ì„œë²„ ì´ë¦„
  - `DBName`: ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
  - `tableName`: í…Œì´ë¸” ì´ë¦„
  - `rawStreamName`: ì›ë³¸ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ ì´ë¦„

### 3. ìŠ¤íŠ¸ë¦¼ ìƒì„±

- **API**: `POST /kafka/createStream/{streamName}/{topicName}/{rawStreamName}`
- **ì„¤ëª…**: Kafka ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `streamName`: ìƒì„±í•  ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `topicName`: ì—°ê²°í•  Kafka í† í”½ì˜ ì´ë¦„
  - `rawStreamName`: ì›ë³¸ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„

### 4. ì»¬ëŸ¼ ì¶”ê°€

- **API**: `POST /kafka/addColumn/{sourceStreamName}/{streamName}/{topicName}/{columnName}/{dataType}/{withPartitions}`
- **ì„¤ëª…**: ì§€ì •í•œ Kafka ìŠ¤íŠ¸ë¦¼ì— ìƒˆë¡œìš´ ì»¬ëŸ¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `sourceStreamName`: ì›ë³¸ ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `streamName`: ìƒˆ ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `topicName`: ì—°ê²°í•  Kafka í† í”½ì˜ ì´ë¦„
  - `columnName`: ì¶”ê°€í•  ì»¬ëŸ¼ì˜ ì´ë¦„
  - `dataType`: ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ìž…
  - `withPartitions`: íŒŒí‹°ì…˜ ì‚¬ìš© ì—¬ë¶€ (true/false)

### 5. ì»¬ëŸ¼ ì‚­ì œ

- **API**: `POST /kafka/dropColumn/{sourceStreamName}/{newStreamName}/{topicName}/{excludedColumnName}`
- **ì„¤ëª…**: Kafka ìŠ¤íŠ¸ë¦¼ì—ì„œ ì§€ì •ëœ ì»¬ëŸ¼ì„ ì œì™¸í•˜ê³  ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `sourceStreamName`: ì›ë³¸ ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `newStreamName`: ìƒˆë¡œ ìƒì„±í•  ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `topicName`: ì—°ê²°í•  Kafka í† í”½ì˜ ì´ë¦„
  - `excludedColumnName`: ì œì™¸í•  ì»¬ëŸ¼ì˜ ì´ë¦„

### 6. ë°ì´í„° í•„í„°ë§

- **API**: `POST /kafka/filter/{sourceStreamName}/{streamName}/{topicName}/{columnName}/{condition}/{operation}/{isNumeric}/{withPartitions}`
- **ì„¤ëª…**: ì§€ì •ëœ ì¡°ê±´ê³¼ ì—°ì‚°ì„ í†µí•´ ë°ì´í„°ë¥¼ í•„í„°ë§í•œ í›„ Kafka ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `sourceStreamName`: ì›ë³¸ ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `streamName`: ìƒˆë¡œ ìƒì„±ë  í•„í„°ëœ ìŠ¤íŠ¸ë¦¼ ì´ë¦„
  - `topicName`: ì—°ê²°í•  Kafka í† í”½ì˜ ì´ë¦„
  - `columnName`: ì¡°ê±´ì„ ì ìš©í•  ì»¬ëŸ¼ì˜ ì´ë¦„
  - `condition`: í•„í„°ë§í•  ì¡°ê±´
  - `operation`: í•„í„°ë§ ì—°ì‚°ìž (ì˜ˆ: `=`, `>`, `<`)
  - `isNumeric`: ë°ì´í„°ê°€ ìˆ«ìžì¸ì§€ ì—¬ë¶€ (true/false)
  - `withPartitions`: íŒŒí‹°ì…˜ ì‚¬ìš© ì—¬ë¶€ (true/false)

### 7. ì´íƒˆ ê°ì§€

- **API**: `POST /kafka/exitDetection/{sourceStreamName}/{streamName}/{topicName}`
- **ì„¤ëª…**: Kafka ìŠ¤íŠ¸ë¦¼ì—ì„œ ì´íƒˆ ê°ì§€ ìž‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `sourceStreamName`: ì›ë³¸ ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `streamName`: ìƒˆë¡œ ìƒì„±í•  ì´íƒˆ ê°ì§€ ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„
  - `topicName`: ì—°ê²°í•  Kafka í† í”½ì˜ ì´ë¦„

### 8. ìŠ¤íŠ¸ë¦¼ ì„¤ëª…

- **API**: `GET /kafka/describe/{sourceStreamName}`
- **ì„¤ëª…**: ì§€ì •ëœ ìŠ¤íŠ¸ë¦¼ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
- **íŒŒë¼ë¯¸í„°**:
  - `sourceStreamName`: ì„¤ëª…í•  ìŠ¤íŠ¸ë¦¼ì˜ ì´ë¦„

## ðŸ”§ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### ksqlDBì˜ JSON ë°ì´í„° ì²˜ë¦¬ ë¬¸ì œ

- JSON ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ, ê° ë©”ì„¸ì§€ì— **Keyì™€ Valueì˜ Schema , Payloadê°€ í¬í•¨**ë©ë‹ˆë‹¤.
    - ì´ëŠ” ë©”ì‹œì§€ í¬ê¸°ë¥¼ ì¦ê°€ì‹œì¼œ ì €ìž¥ ê³µê°„ì„ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´, ìž‘ì€ í¬ê¸°ì˜ ë°ì´í„°ë¼ë„ ìŠ¤í‚¤ë§ˆ íŽ˜ì´ë¡œë“œë¡œ ì¸í•´ ë©”ì‹œì§€ í•˜ë‚˜ë‹¹ ìš©ëŸ‰ì´ ë¶ˆí•„ìš”í•˜ê²Œ ì»¤ì¡Œì—ˆìŠµë‹ˆë‹¤.
- ë˜í•œ, ìŠ¤í‚¤ë§ˆë¥¼ í¬í•¨í•œ JSON ë©”ì‹œì§€ì—ì„œ **ksqlDBê°€ íŠ¹ì • ë°ì´í„° í•„ë“œë¥¼ ì œëŒ€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ì˜¤ë¥˜**ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤
    - ìŠ¤í‚¤ë§ˆì˜ ì¤‘ë³µëœ ì •ì˜ë‚˜ ë¶ˆí•„ìš”í•œ ë©”íƒ€ë°ì´í„°ë¡œ ì¸í•´ ì²˜ë¦¬ ê³¼ì •ì—ì„œ ë°ì´í„° íƒ€ìž…ì´ ë¶ˆì¼ì¹˜í•˜ê±°ë‚˜ ì¼ë¶€ í•„ë“œê°€ ëˆ„ë½ë˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

---

### Avro ë° Schema Registry ë„ìž… ê³¼ í•´ê²°

- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **Avro í˜•ì‹ê³¼ Schema Registry**ë¥¼ ë„ìž…í–ˆìŠµë‹ˆë‹¤.
    - **Avro**ëŠ” ìŠ¤í‚¤ë§ˆ ì •ë³´ë¥¼ ë³„ë„ë¡œ ê´€ë¦¬í•˜ê³ , ë©”ì‹œì§€ ë³¸ë¬¸ì—ëŠ” ë°ì´í„°ë§Œ í¬í•¨ë˜ë„ë¡ ì„¤ê³„ë˜ì–´ ë©”ì‹œì§€ í¬ê¸°ë¥¼ ì¤„ì—¬ íš¨ìœ¨ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.
    - **Schema Registry**ë¥¼ í™œìš©í•´ ìŠ¤í‚¤ë§ˆë¥¼ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ë©°, ë°ì´í„° íƒ€ìž…ê³¼ í•„ë“œ êµ¬ì¡°ë¥¼ ëª…í™•ížˆ ì •ì˜í•¨ìœ¼ë¡œì¨ ksqlDBì˜ ë°ì´í„° ì²˜ë¦¬ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.

---

**ê²°ê³¼ì ìœ¼ë¡œ**, Avroì™€ **Schema Registry**ë¥¼ ë„ìž…í•¨ìœ¼ë¡œì¨ ë°ì´í„° ì²˜ë¦¬ íš¨ìœ¨ì„±ê³¼ ì¼ê´€ì„±ì„ í™•ë³´í•˜ê³ , ksqlDBì™€ì˜ í˜¸í™˜ì„±ì„ ê°•í™”í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.



